# –§–∞–π–ª –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é –Ω–∞ Render
# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è: https://render.com/docs/deploy-render-yaml

services:
  - type: web
    name: sport-rent-app
    env: node
    region: frankfurt  # –Ñ–≤—Ä–æ–ø–µ–π—Å—å–∫–∏–π —Ä–µ–≥—ñ–æ–Ω –¥–ª—è –∫—Ä–∞—â–æ—ó —à–≤–∏–¥–∫–æ—Å—Ç—ñ
    runtime: node
    buildCommand: |
      echo "üöÄ Starting optimized build..."
      npm ci --only=production --no-audit --no-fund --prefer-offline
      npm run build
      echo "‚úÖ Build completed successfully"
    startCommand: node server.js
    healthCheckPath: /api/health
    autoDeploy: false  # –í–∏–º–∫–Ω—É—Ç–∏ –∞–≤—Ç–æ-–¥–µ–ø–ª–æ–π –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—é
    disk:
      name: cache
      mountPath: /opt/render/cache
      sizeGB: 1
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      - key: NPM_CONFIG_CACHE
        value: /opt/render/cache/.npm
      - key: FIREBASE_PROJECT_ID
        sync: false
      - key: FIREBASE_PRIVATE_KEY
        sync: false
      - key: FIREBASE_CLIENT_EMAIL
        sync: false
      - key: FIREBASE_DATABASE_URL
        sync: false
    plan: free  # –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –ø–ª–∞–Ω –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó
    autoDeploy: true  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –¥–µ–ø–ª–æ–π –ø—Ä–∏ –ø—É—à–∞—Ö —É main –≥—ñ–ª–∫—É

# –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Å–µ—Ä–≤—ñ—Å–∏ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
# databases:
#   - name: sport-rent-db
#     databaseName: sportrent
#     user: sportrent_user
#     plan: free
